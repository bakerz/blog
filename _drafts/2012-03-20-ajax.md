---
title: AJAX 笔记
category: 技术
tags: [AJAX, JavaScript, jQuery]
---

> AJAX 即 "Asynchronous Javascript And XML" （异步的 JavaScript 和 XML），是指一种创建交互式网页应用技术。通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。
> 传统的网页（不使用 AJAX）如果需要更新内容，必须重载整个网页页面。

## jquery 中的 AJAX

## $.getJSON()跨域请求

## 示例

```js
const request = ({ url, method, data }) => {
  return new Promise((resolve, reject) => {
    let xhr = null;
    if (window.XMLHttpRequest) {
      xhr = new XMLHttpRequest();
    } else {
      // eslint-disable-next-line no-undef
      xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }

    url = `/integration-auth-api/apis/v1${url}`;
    xhr.open(method, encodeURI(url));
    xhr.setRequestHeader("Authorization", "123");
    // xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=UTF-8');
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.send(data ? JSON.stringify(data) : null);

    xhr.onreadystatechange = () => {
      if (xhr.readyState === 4 && xhr.status === 200) {
        // console.log(xhr);
        resolve(JSON.parse(xhr.responseText));
      }
      if (xhr.status != 200) {
        reject("err");
      }
    };
  });
};

export default request;
```

## 参考资料

[pjax 原理和使用](https://www.jianshu.com/p/f67f2e69d4de)
